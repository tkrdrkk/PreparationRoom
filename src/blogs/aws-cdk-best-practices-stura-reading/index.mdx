---
title: 'AWS CDKベストプラクティス15か条'
date: '2022-11-02'
hero_image: './simon-berger-twukN12EN7c-unsplash.jpg'
hero_image_alt: 'horizon'
hero_image_credit_text: 'Simon Berger'
hero_image_credit_link: 'https://unsplash.com/photos/twukN12EN7c'
---

AWS CDK に腰を据えて取り組むことにした。
公式がベストプラクティスを教えてくれている（それも日本語訳ありという親切さ）ので、丸覚えとチェックリストのために箇条書きで写経する。コードの写経ですらないこの営みにどれほどの意味があるのか分からないが、とにかく「哲学」からプラクティス一つ一つへの共感を強く抱いたので。

[引用元(AWS 公式)](https://aws.amazon.com/jp/blogs/news/best-practices-for-developing-cloud-applications-with-aws-cdk/)

## コードを管理するためのベストプラクティス

- シンプルな構成から初めて、必要に応じて複雑な構成に変更
- すべてのアプリケーションは、1 つのリポジトリにある 1 つのパッケージから始める
- コードのライフサイクルやチームの所有権に応じてリポジトリに分割する
- インフラストラクチャコードとアプリケーションコードを同じパッケージにする

## Construct ライブラリのベストプラクティス

- Stack ではなく Construct でアプリをモデル化する
- 環境変数ではなく、API（プロパティ、メソッド）で設定する
- インフラストラクチャのユニットテスト
- ステートフルリソースのスコープと ID を変更しない
- コンプライアンスのために Construct を使わない

## AWS CDK アプリケーションのベストプラクティス

- デプロイ時ではなく、合成時に決定する
- 自動で生成されるリソース名を使用し、物理的な名前を使用しない
- デプロイ要件に応じて、アプリケーションの Stage を複数の Stack に分割する
- AWS CDK でロールとセキュリティグループを管理できるようにする
- 全ての Stage をコードでモデル化する
- 全てを測定する

以上 15 か条。壁に貼って毎朝 3 回唱えたら、1 週間もあれば覚えられるかもしれない。
